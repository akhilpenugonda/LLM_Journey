'import java.util.Random;\n\npublic class FifteenPuzzle {\n    private static int[][] displayCell = new int[4][4];\n    private static int rEmpty;\n    private static int cEmpty;\n    \n    public static void main(String[] args) {\n        System.out.println("start fifteen puzzle");\n        System.out.println("    enter a two-digit tile number and press <enter> to move");\n        System.out.println("    press <enter> only to exit");\n        \n        initializeTable();\n        showTable();\n        \n        while (true) {\n            String input = System.console().readLine();\n            if (input.isEmpty()) {\n                break;\n            }\n            int tileId;\n            try {\n                tileId = Integer.parseInt(input);\n            } catch (NumberFormatException e) {\n                System.out.println("Invalid tile number");\n                continue;\n            }\n            moveTile(tileId);\n            showTable();\n        }\n    }\n    \n    private static void initializeTable() {\n        Random random = new Random();\n        int tileNumber = random.nextInt(16);\n        String tileFlags = "                ";\n        int inversions = 0;\n        \n        for (int r = 0; r < 4; r++) {\n            for (int c = 0; c < 4; c++) {\n                do {\n                    tileNumber = random.nextInt(16);\n                } while (tileFlags.charAt(tileNumber) != \' \');\n                \n                tileFlags = tileFlags.substring(0, tileNumber) + \'x\' + tileFlags.substring(tileNumber + 1);\n                if (tileNumber > 0 && tileNumber < inversions) {\n                    inversions++;\n                }\n                displayCell[r][c] = tileNumber;\n            }\n        }\n        inversions %= 2;\n    }\n    \n    private static void showTable() {\n        String rowSeparator = ".....................";\n        String columnSeparator = " . ";\n        \n        for (int r = 0; r < 4; r++) {\n            System.out.println(rowSeparator);\n            for (int c = 0; c < 4; c++) {\n                System.out.print(columnSeparator);\n                if (displayCell[r][c] == 0) {\n                    System.out.print("  ");\n                    rEmpty = r;\n                    cEmpty = c;\n                } else {\n                    System.out.print(displayCell[r][c]);\n                }\n            }\n            System.out.println(columnSeparator);\n        }\n        System.out.println(rowSeparator);\n        \n        if (isWinning()) {\n            System.out.println("winning");\n        }\n    }\n    \n    private static void moveTile(int tileId) {\n        int r = -1;\n        int c = -1;\n        \n        // Find the entered tile-id row and column (r, c)\n        for (int row = 0; row < 4; row++) {\n            for (int column = 0; column < 4; column++) {\n                if (displayCell[row][column] == tileId) {\n                    r = row;\n                    c = column;\n                    break;\n                }\n            }\n        }\n        \n        if (r == -1 || c == -1) {\n            System.out.println("Invalid move");\n            return;\n        }\n        \n        // Move the tile\n        if (r == rEmpty) {\n            if (cEmpty < c) {\n                // Shift left\n                for (int i = cEmpty; i < c; i++) {\n                    displayCell[rEmpty][i] = displayCell[rEmpty][i + 1];\n                }\n            } else {\n                // Shift right\n                for (int i = cEmpty; i > c; i--) {\n                    displayCell[rEmpty][i] = displayCell[rEmpty][i - 1];\n                }\n            }\n            displayCell[rEmpty][c] = 0;\n        } else if (c == cEmpty) {\n            if (rEmpty < r) {\n                // Shift up\n                for (int i = rEmpty; i < r; i++) {\n                    displayCell[i][cEmpty] = displayCell[i + 1][cEmpty];\n                }\n            } else {\n                // Shift down\n                for (int i = rEmpty; i > r; i--) {\n                    displayCell[i][cEmpty] = displayCell[i - 1][cEmpty];\n                }\n            }\n            displayCell[r][cEmpty] = 0;\n        } else {\n            System.out.println("Invalid move");\n        }\n    }\n    \n    private static boolean isWinning() {\n        String winningDisplay = "01020304050607080910111213141500";\n        StringBuilder displayTable = new StringBuilder();\n        \n        for (int r = 0; r < 4; r++) {\n            for (int c = 0; c < 4; c++) {\n                displayTable.append(String.format("%02d", displayCell[r][c]));\n            }\n        }\n        \n        return displayTable.toString().equals(winningDisplay);\n    }\n}'